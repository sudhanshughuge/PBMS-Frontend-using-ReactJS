{"ast":null,"code":"import _objectSpread from\"C:/Major Project/ProjectFrontend/pbms/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Major Project/ProjectFrontend/pbms/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import React,{useEffect,useState}from\"react\";import{toast}from\"react-toastify\";import base_url from\"../api/Service\";import{getToken}from\"../auth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AddProperty(){useEffect(function(){document.title=\"Add Property || Property Booking Management System\";},[]);var _useState=useState({propName:'',propAddress:'',propCity:'',state:'',pincode:'',rate:''}),_useState2=_slicedToArray(_useState,2),property=_useState2[0],setProperty=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),propid=_useState4[0],setPropId=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),cityList=_useState6[0],setCityList=_useState6[1];var getPropID=function getPropID(){axios.get(\"\".concat(base_url,\"/property/maxid\"),{headers:{\"Authorization\":\"Bearer \".concat(getToken())}}).then(function(response){setPropId(response.data+1);},function(error){console.log(error);toast.error(\"Server Down\",{toastId:\"errortoast\"});});};var getCityList=function getCityList(){axios.get(\"\".concat(base_url,\"/cities/\"),{headers:{\"Authorization\":\"Bearer \".concat(getToken())}}).then(function(response){setCityList(response.data);},function(error){console.log(error);});};var init=function init(){getPropID();getCityList();setProperty({propName:'',propAddress:'',propCity:'',state:'',pincode:'',rate:''});};useEffect(function(){init();// eslint-disable-next-line\n},[]);var handleForm=function handleForm(e){e.preventDefault();console.log(property);if(property.propName===\"\"||property.propAddress===\"\"||property.propCity===\"\"||property.rate===\"\"||property.state===\"\"||property.pincode===\"\"){toast.error(\"No field can be Blank !\");return;}else if(property.pincode.length!==6){toast.error(\"Invalid PinCode !\");return;}else{postDatatoServer(property);init();}};var postDatatoServer=function postDatatoServer(data){axios.post(\"\".concat(base_url,\"/property/\"),data,{headers:{\"Authorization\":\"Bearer \".concat(getToken())}}).then(function(response){toast.success(\"Property Added Successfully\",{toastId:\"propaddedtoast\"});},function(error){console.log(error);});};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid \",children:/*#__PURE__*/_jsx(\"div\",{className:\"row col-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-100\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"justify-content-center text-center\",onSubmit:handleForm,action:\"/\",method:\"post\",id:\"property_form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-info text-center w-100 p-3 ml-3\",role:\"alert\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Property Details\"})}),/*#__PURE__*/_jsx(\"input\",{id:\"PropID\",placeholder:\"Property ID\",className:\"form-control m-3\",type:\"text\",disabled:true,value:propid}),/*#__PURE__*/_jsx(\"input\",{name:\"PropName\",placeholder:\"Enter Property Name\",value:property.propName,className:\"form-control m-3\",type:\"text\",onChange:function onChange(e){setProperty(_objectSpread(_objectSpread({},property),{},{propName:e.target.value}));}}),/*#__PURE__*/_jsx(\"input\",{name:\"PropAddress\",placeholder:\"Property Address\",value:property.propAddress,className:\"form-control m-3\",type:\"text\",onChange:function onChange(e){setProperty(_objectSpread(_objectSpread({},property),{},{propAddress:e.target.value}));}}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-inline row \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-6\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-control w-100 ml-3\",value:property.propCity,id:\"city\",onChange:function onChange(e){setProperty(_objectSpread(_objectSpread({},property),{},{propCity:e.target.value}));},children:[/*#__PURE__*/_jsx(\"option\",{value:'',children:\"Select City\"}),cityList.length>0?cityList.map(function(city,i){return/*#__PURE__*/_jsx(\"option\",{children:city.city},i);}):/*#__PURE__*/_jsx(\"option\",{children:\"Server Down or No City Found\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-control w-100 ml-3\",value:property.state,id:\"state\",onChange:function onChange(e){setProperty(_objectSpread(_objectSpread({},property),{},{state:e.target.value}));},children:[/*#__PURE__*/_jsx(\"option\",{value:'',children:\"Select State\"}),/*#__PURE__*/_jsx(\"option\",{value:'Maharashtra',children:\"Maharashtra\"})]})})]}),/*#__PURE__*/_jsx(\"input\",{name:\"Pincode\",placeholder:\"Pin Code\",value:property.pincode,className:\"form-control m-3\",type:\"text\",onChange:function onChange(e){setProperty(_objectSpread(_objectSpread({},property),{},{pincode:e.target.value}));}}),/*#__PURE__*/_jsx(\"input\",{name:\"PropRate\",placeholder:\"Enter Property Rate\",value:property.rate,className:\"form-control m-3\",type:\"text\",onChange:function onChange(e){setProperty(_objectSpread(_objectSpread({},property),{},{rate:e.target.value}));}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-outline-success mx-3\",children:\"Add Property\"}),/*#__PURE__*/_jsx(\"button\",{type:\"reset\",className:\"btn btn-outline-danger mx-3\",children:\"Clear\"})]})})})})});}export default AddProperty;","map":{"version":3,"names":["axios","React","useEffect","useState","toast","base_url","getToken","AddProperty","document","title","propName","propAddress","propCity","state","pincode","rate","property","setProperty","propid","setPropId","cityList","setCityList","getPropID","get","headers","then","response","data","error","console","log","toastId","getCityList","init","handleForm","e","preventDefault","length","postDatatoServer","post","success","target","value","map","city","i"],"sources":["C:/Major Project/ProjectFrontend/pbms/src/components/AddProperty.js"],"sourcesContent":["import axios from \"axios\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport base_url from \"../api/Service\";\r\nimport { getToken } from \"../auth\";\r\n\r\nfunction AddProperty() {\r\n\r\n    useEffect(() => {\r\n        document.title = \"Add Property || Property Booking Management System\"\r\n    }, [])\r\n\r\n    const [property, setProperty] = useState({\r\n        propName:'',\r\n        propAddress:'',\r\n        propCity:'',\r\n        state:'',\r\n        pincode:'',\r\n        rate:''\r\n    })\r\n    const [propid, setPropId] = useState({})\r\n    const [cityList, setCityList] = useState({})\r\n\r\n    const getPropID = () => {\r\n\r\n        axios.get(`${base_url}/property/maxid`, {headers: {\"Authorization\" : `Bearer ${getToken()}`}}).then(\r\n            (response) => {\r\n                setPropId(response.data + 1)\r\n            },\r\n            (error) => {\r\n                console.log(error);\r\n                toast.error(\"Server Down\", {\r\n                    toastId: \"errortoast\"\r\n                });\r\n            }\r\n        );\r\n\r\n    }\r\n\r\n    const getCityList = () => {\r\n\r\n        axios.get(`${base_url}/cities/`, {headers: {\"Authorization\" : `Bearer ${getToken()}`}}).then(\r\n            (response) => {\r\n                setCityList(response.data)\r\n            },\r\n            (error) => {\r\n                console.log(error);\r\n            }\r\n        );\r\n    }\r\n\r\n    const init=()=>{\r\n        getPropID();\r\n        getCityList();\r\n        setProperty({\r\n            propName:'',\r\n            propAddress:'',\r\n            propCity:'',\r\n            state:'',\r\n            pincode:'',\r\n            rate:''\r\n        });\r\n    }\r\n    useEffect(() => {\r\n        init();\r\n        // eslint-disable-next-line\r\n    }, [])\r\n\r\n    const handleForm = (e) => {\r\n        e.preventDefault();\r\n        console.log(property)\r\n        if(property.propName === \"\" || property.propAddress === \"\" || property.propCity === \"\" || property.rate === \"\" || property.state === \"\" || property.pincode === \"\"){\r\n            toast.error(\"No field can be Blank !\")\r\n            return;\r\n        } else if (property.pincode.length !== 6){\r\n            toast.error(\"Invalid PinCode !\")\r\n            return;\r\n        } else {\r\n            postDatatoServer(property);\r\n            init();\r\n        }\r\n    }\r\n\r\n\r\n    const postDatatoServer = (data) => {\r\n        axios.post(`${base_url}/property/`, data, {headers: {\"Authorization\" : `Bearer ${getToken()}`}}).then(\r\n            (response) => {\r\n                toast.success(\"Property Added Successfully\", {\r\n                    toastId: \"propaddedtoast\"\r\n                })\r\n            },\r\n            (error) => {\r\n                console.log(error);\r\n            }\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"container-fluid \">\r\n                <div className=\"row col-12\">\r\n\r\n                    <div className=\"w-100\">\r\n\r\n                        <form className=\"justify-content-center text-center\" onSubmit={handleForm} action=\"/\" method=\"post\" id=\"property_form\">\r\n\r\n                            <div className=\"alert alert-info text-center w-100 p-3 ml-3\" role=\"alert\">\r\n                                <h2>Property Details</h2>\r\n                            </div>\r\n                            <input id=\"PropID\" placeholder=\"Property ID\" className=\"form-control m-3\" type=\"text\" disabled value={propid} />\r\n                            <input name=\"PropName\" placeholder=\"Enter Property Name\" value={property.propName} className=\"form-control m-3\" type=\"text\" onChange={(e) => {\r\n                                setProperty({ ...property, propName: e.target.value })\r\n                            }} />\r\n                            <input name=\"PropAddress\" placeholder=\"Property Address\" value={property.propAddress} className=\"form-control m-3\" type=\"text\" onChange={(e) => {\r\n                                setProperty({ ...property, propAddress: e.target.value })\r\n                            }} />\r\n                            <div className=\"form-inline row \">\r\n                                <div className=\"col-6\">\r\n                                    <select className=\"form-control w-100 ml-3\" value={property.propCity} id=\"city\" onChange={(e) => {\r\n                                        setProperty({ ...property, propCity: e.target.value })\r\n                                    }}>\r\n                                        <option value={''}>Select City</option>\r\n\r\n                                        {\r\n                                            cityList.length > 0 ? cityList.map((city, i) => (\r\n\r\n                                                <option key={i}>{city.city}</option>\r\n\r\n\r\n                                            )) : <option>Server Down or No City Found</option>\r\n                                        }\r\n\r\n                                    </select>\r\n                                </div>\r\n                                <div className=\"col-6\">\r\n                                    <select className=\"form-control w-100 ml-3\" value={property.state} id=\"state\" onChange={(e) => {\r\n                                        setProperty({ ...property, state: e.target.value })\r\n                                    }}>\r\n                                        <option value={''}>Select State</option>\r\n                                        <option value={'Maharashtra'}>Maharashtra</option>\r\n                                    </select>\r\n\r\n                                </div>\r\n\r\n                            </div>\r\n                            <input name=\"Pincode\" placeholder=\"Pin Code\" value={property.pincode} className=\"form-control m-3\" type=\"text\" onChange={(e) => {\r\n                                setProperty({ ...property, pincode: e.target.value })\r\n                            }} />\r\n                            <input name=\"PropRate\" placeholder=\"Enter Property Rate\" value={property.rate} className=\"form-control m-3\" type=\"text\" onChange={(e) => {\r\n                                setProperty({ ...property, rate: e.target.value })\r\n                            }} />\r\n                            <button type=\"submit\" className=\"btn btn-outline-success mx-3\">Add Property</button>\r\n                            <button type=\"reset\" className=\"btn btn-outline-danger mx-3\">Clear</button>\r\n                        </form>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default AddProperty"],"mappings":"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"},"metadata":{},"sourceType":"module"}