{"ast":null,"code":"import _objectSpread from\"C:/Major Project/ProjectFrontend/pbms/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Major Project/ProjectFrontend/pbms/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import jsPDF from\"jspdf\";import React,{useEffect}from\"react\";import{useState}from\"react\";import{Link}from\"react-router-dom\";import{toast}from\"react-toastify\";import{Button,Table}from\"reactstrap\";import base_url from\"../api/Service\";import{getToken}from\"../auth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AllProperties(){useEffect(function(){document.title=\"Property Report || Property Booking Management System\";},[]);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),properties=_useState2[0],setProperties=_useState2[1];var getAllPropertiesFromServer=function getAllPropertiesFromServer(){axios.get(\"\".concat(base_url,\"/property/\"),{headers:{\"Authorization\":\"Bearer \".concat(getToken())}}).then(function(response){toast.success(\"Property List has been Updated\",{toastId:\"loadedtoast\"});setProperties(response.data);},function(error){console.log(error);toast.error(\"Server Down\",{toastId:\"errortoast\"});});};var init=function init(){getAllPropertiesFromServer();};useEffect(function(){init();// eslint-disable-next-line\n},[]);var printfunction=function printfunction(){var doc=new jsPDF();doc.text(\"Property Details\",20,10);doc.autoTable({html:'#PropertyTable'});doc.save('propertydetails.pdf');toast.info(\"Property Report Downloaded Successfully\",{toastId:\"downloadtoast\"});};var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),deleteProp=_useState4[0],setDeleteProp=_useState4[1];var deleteProperty=function deleteProperty(e){deleteDatafromServer(deleteProp);e.preventDefault();};var deleteDatafromServer=function deleteDatafromServer(data){axios.delete(\"\".concat(base_url,\"/property/\").concat(data.deletepropid),{headers:{\"Authorization\":\"Bearer \".concat(getToken())}}).then(function(response){toast.error(\"Property Deleted\",{toastId:\"deletetoast\"});init();},function(error){console.log(error);toast.info(\"You are not an Admin or Property Not Found\",{toastId:\"deleteinfotoast\"});});};return/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-info text-center w-100 p-3 ml-3\",role:\"alert\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Properties Reports\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"my-custom-scrollbar table-wrapper-scroll-y ml-3\",children:/*#__PURE__*/_jsxs(Table,{className:\"table table-bordered table-striped mb-0 w-100\",id:\"PropertyTable\",striped:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"col-2\",scope:\"row\",children:\"Property Id\"}),/*#__PURE__*/_jsx(\"th\",{className:\"col-3\",children:\"Property Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"col-1\",children:\"City\"}),/*#__PURE__*/_jsx(\"th\",{className:\"col-2\",children:\"Rate\"}),/*#__PURE__*/_jsx(\"th\",{className:\"col-2\",children:\"Booking Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"col-2\",children:\"Update\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:properties.length>0?properties.map(function(property,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-center\",scope:\"row\",children:property.propID}),/*#__PURE__*/_jsx(\"td\",{children:property.propName}),/*#__PURE__*/_jsx(\"td\",{children:property.propCity}),/*#__PURE__*/_jsx(\"td\",{children:property.rate}),/*#__PURE__*/_jsx(\"td\",{children:property.bookStatus}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:\"/dashboard/updateproperty/\".concat(property.propID),children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-dark  ml-2\",children:\"Update\"})})})]},i);}):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",colSpan:6,children:\"No Properties Found or Server Down\"})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"container text-center mt-3 p-3\",children:/*#__PURE__*/_jsx(\"form\",{className:\"form-inline justify-content-center\",onSubmit:deleteProperty,action:\"\",method:\"post\",id:\"delete_property_form\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control mx-3\",id:\"deletepropid\",placeholder:\"Enter Property Id\",onChange:function onChange(e){setDeleteProp(_objectSpread(_objectSpread({},deleteProp),{},{deletepropid:e.target.value}));}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-outline-danger mx-3\",children:\"Delete Customer\"})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"container text-center p-3\",children:/*#__PURE__*/_jsx(Button,{color:\"info\",outline:true,onClick:printfunction,children:\"Download Property Report\"})})]});}export default AllProperties;","map":{"version":3,"names":["axios","jsPDF","React","useEffect","useState","Link","toast","Button","Table","base_url","getToken","AllProperties","document","title","properties","setProperties","getAllPropertiesFromServer","get","headers","then","response","success","toastId","data","error","console","log","init","printfunction","doc","text","autoTable","html","save","info","deleteProp","setDeleteProp","deleteProperty","e","deleteDatafromServer","preventDefault","delete","deletepropid","length","map","property","i","propID","propName","propCity","rate","bookStatus","target","value"],"sources":["C:/Major Project/ProjectFrontend/pbms/src/components/AllProperties.js"],"sourcesContent":["import axios from \"axios\";\r\nimport jsPDF from \"jspdf\";\r\nimport React, { useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Button, Table } from \"reactstrap\";\r\nimport base_url from \"../api/Service\";\r\nimport { getToken } from \"../auth\";\r\n\r\nfunction AllProperties() {\r\n\r\n    useEffect(() => {\r\n        document.title = \"Property Report || Property Booking Management System\"\r\n    }, [])\r\n\r\n\r\n    const [properties, setProperties] = useState([])\r\n\r\n    const getAllPropertiesFromServer = () => {\r\n        axios.get(`${base_url}/property/`, { headers: { \"Authorization\": `Bearer ${getToken()}` } }).then(\r\n            (response) => {\r\n                toast.success(\"Property List has been Updated\", {\r\n                    toastId: \"loadedtoast\"\r\n                });\r\n                setProperties(response.data)\r\n            },\r\n            (error) => {\r\n                console.log(error);\r\n                toast.error(\"Server Down\", {\r\n                    toastId: \"errortoast\"\r\n                });\r\n            }\r\n        );\r\n    };\r\n\r\n    const init = () => {\r\n        getAllPropertiesFromServer();\r\n\r\n    }\r\n    useEffect(() => {\r\n        init();\r\n        // eslint-disable-next-line\r\n    }, [])\r\n\r\n    const printfunction = () => {\r\n        const doc = new jsPDF()\r\n        doc.text(\"Property Details\", 20, 10)\r\n        doc.autoTable({ html: '#PropertyTable' })\r\n        doc.save('propertydetails.pdf')\r\n        toast.info(\"Property Report Downloaded Successfully\", {\r\n            toastId: \"downloadtoast\"\r\n        })\r\n    }\r\n\r\n    const [deleteProp, setDeleteProp] = useState({})\r\n\r\n    const deleteProperty = (e) => {\r\n        deleteDatafromServer(deleteProp);\r\n        e.preventDefault();\r\n    }\r\n\r\n    const deleteDatafromServer = (data) => {\r\n        axios.delete(`${base_url}/property/${data.deletepropid}`, { headers: { \"Authorization\": `Bearer ${getToken()}` } }).then(\r\n            (response) => {\r\n                toast.error(\"Property Deleted\", {\r\n                    toastId: \"deletetoast\"\r\n                })\r\n                init();\r\n            },\r\n            (error) => {\r\n                console.log(error);\r\n                toast.info(\"You are not an Admin or Property Not Found\", {\r\n                    toastId: \"deleteinfotoast\"\r\n                })\r\n            }\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"ml-3\">\r\n            <div className=\"alert alert-info text-center w-100 p-3 ml-3\" role=\"alert\">\r\n                <h2>Properties Reports</h2>\r\n            </div>\r\n            <div className=\"my-custom-scrollbar table-wrapper-scroll-y ml-3\">\r\n                <Table className=\"table table-bordered table-striped mb-0 w-100\" id=\"PropertyTable\" striped >\r\n                    <thead>\r\n                        <tr>\r\n                            <th className=\"col-2\" scope=\"row\">Property Id</th>\r\n                            <th className=\"col-3\">Property Name</th>\r\n                            <th className=\"col-1\">City</th>\r\n                            <th className=\"col-2\">Rate</th>\r\n                            <th className=\"col-2\">Booking Status</th>\r\n                            <th className=\"col-2\">Update</th>\r\n\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {\r\n                            properties.length > 0 ? properties.map((property, i) => (\r\n                                <tr key={i}>\r\n                                    <th className=\"text-center\" scope=\"row\">{property.propID}</th>\r\n                                    <td>{property.propName}</td>\r\n                                    <td>{property.propCity}</td>\r\n                                    <td>{property.rate}</td>\r\n                                    <td>{property.bookStatus}</td>\r\n                                    <td><Link to={`/dashboard/updateproperty/${property.propID}`}><button className=\"btn btn-outline-dark  ml-2\">Update</button></Link></td>\r\n                                </tr>\r\n                            )) : <tr><td className=\"text-center\" colSpan={6}>No Properties Found or Server Down</td></tr>\r\n                        }\r\n                    </tbody>\r\n                </Table>\r\n            </div>\r\n            <div className=\"container text-center mt-3 p-3\">\r\n                <form className=\"form-inline justify-content-center\" onSubmit={deleteProperty} action=\"\" method=\"post\" id=\"delete_property_form\">\r\n                    <div className=\"form-group\">\r\n                        <input type=\"text\" className=\"form-control mx-3\" id=\"deletepropid\" placeholder=\"Enter Property Id\" onChange={(e) => {\r\n                            setDeleteProp({ ...deleteProp, deletepropid: e.target.value })\r\n                        }} />\r\n                        <button type=\"submit\" className=\"btn btn-outline-danger mx-3\">Delete Customer</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n\r\n            <div className=\"container text-center p-3\">\r\n                <Button color=\"info\" outline onClick={printfunction}>Download Property Report</Button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AllProperties"],"mappings":"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"},"metadata":{},"sourceType":"module"}