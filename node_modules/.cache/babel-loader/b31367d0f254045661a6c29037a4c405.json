{"ast":null,"code":"import _objectSpread from\"C:/Major Project/ProjectFrontend/pbms/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Major Project/ProjectFrontend/pbms/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import React,{useEffect,useState}from\"react\";import{Link,useParams}from\"react-router-dom\";import{toast}from\"react-toastify\";import base_url from\"../api/Service\";import{getToken}from\"../auth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UpdateCustomer(){useEffect(function(){document.title=\"Update Customer || Property Booking Management System\";},[]);var _useState=useState({}),_useState2=_slicedToArray(_useState,2),customer=_useState2[0],setCustomer=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),oldCustomer=_useState4[0],setOldCustomer=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),cityList=_useState6[0],setCityList=_useState6[1];var handleForm=function handleForm(e){putDatatoServer(customer);e.preventDefault();};var _useParams=useParams(),updateCustid=_useParams.updateCustid;var putDatatoServer=function putDatatoServer(customer){axios.put(\"\".concat(base_url,\"/customers/\").concat(updateCustid),customer,{headers:{\"Authorization\":\"Bearer \".concat(getToken())}}).then(function(response){toast.success(\"Customer Updated Successfully\",{toastId:\"custaddedtoast\"});},function(error){console.log(error);});};var getOldCustomerData=function getOldCustomerData(){axios.get(\"\".concat(base_url,\"/customers/\").concat(updateCustid),{headers:{\"Authorization\":\"Bearer \".concat(getToken())}}).then(function(response){setOldCustomer(response.data);setCustomer(response.data);},function(error){console.log(error);});};var getCityList=function getCityList(){axios.get(\"\".concat(base_url,\"/cities/\"),{headers:{\"Authorization\":\"Bearer \".concat(getToken())}}).then(function(response){setCityList(response.data);},function(error){console.log(error);});};useEffect(function(){getOldCustomerData();getCityList();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid \",children:/*#__PURE__*/_jsx(\"div\",{className:\"row col-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-100\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"justify-content-center text-center\",onSubmit:handleForm,action:\"/\",method:\"post\",id:\"customer_update_form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-info text-center w-100 p-3 ml-3\",role:\"alert\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Update Customer Details\"})}),/*#__PURE__*/_jsx(\"input\",{id:\"custID\",placeholder:\"Customer ID\",className:\"form-control m-3\",type:\"text\",disabled:true,defaultValue:updateCustid}),/*#__PURE__*/_jsx(\"input\",{id:\"custName\",placeholder:\"Customer's Name\",className:\"form-control m-3\",type:\"text\",defaultValue:oldCustomer.custName,onChange:function onChange(e){setCustomer(_objectSpread(_objectSpread({},customer),{},{custName:e.target.value}));}}),/*#__PURE__*/_jsx(\"input\",{id:\"custMobNo\",placeholder:\"Enter Phone Number\",className:\"form-control m-3\",type:\"tel\",defaultValue:oldCustomer.custMobNo,onChange:function onChange(e){setCustomer(_objectSpread(_objectSpread({},customer),{},{custMobNo:e.target.value}));}}),/*#__PURE__*/_jsx(\"input\",{id:\"email\",placeholder:\"Enter E-Mail Address\",className:\"form-control m-3\",type:\"email\",defaultValue:oldCustomer.email,onChange:function onChange(e){setCustomer(_objectSpread(_objectSpread({},customer),{},{email:e.target.value}));}}),/*#__PURE__*/_jsx(\"input\",{id:\"custAddress\",placeholder:\"Customer's Address\",className:\"form-control m-3\",type:\"text\",defaultValue:oldCustomer.custAddress,onChange:function onChange(e){setCustomer(_objectSpread(_objectSpread({},customer),{},{custAddress:e.target.value}));}}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-inline row \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-6\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-control w-100 ml-3\",id:\"custCity\",defaultValue:oldCustomer.custCity,value:oldCustomer.custCity,onChange:function onChange(e){setCustomer(_objectSpread(_objectSpread({},customer),{},{custCity:e.target.value}));},children:[/*#__PURE__*/_jsx(\"option\",{children:\"Select City\"}),cityList.length>0?cityList.map(function(city,i){return/*#__PURE__*/_jsx(\"option\",{value:city.city,children:city.city},i);}):/*#__PURE__*/_jsx(\"option\",{children:\"Server Down or No City Found\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-control w-100 ml-3\",id:\"state\",defaultValue:oldCustomer.state,value:oldCustomer.state,onChange:function onChange(e){setCustomer(_objectSpread(_objectSpread({},customer),{},{state:e.target.value}));},children:[/*#__PURE__*/_jsx(\"option\",{children:\"Select State\"}),/*#__PURE__*/_jsx(\"option\",{value:oldCustomer.state,children:\"Maharashtra\"})]})})]}),/*#__PURE__*/_jsx(\"input\",{id:\"pincode\",placeholder:\"Pin Code\",className:\"form-control m-3\",type:\"text\",defaultValue:oldCustomer.pincode,onChange:function onChange(e){setCustomer(_objectSpread(_objectSpread({},customer),{},{pincode:e.target.value}));}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-outline-success mx-3\",children:\"Update Customer\"}),/*#__PURE__*/_jsx(Link,{to:\"/dashboard/viewcustomers\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-warning mx-3\",children:\"Back\"})})]})})})})});}export default UpdateCustomer;","map":{"version":3,"names":["axios","React","useEffect","useState","Link","useParams","toast","base_url","getToken","UpdateCustomer","document","title","customer","setCustomer","oldCustomer","setOldCustomer","cityList","setCityList","handleForm","e","putDatatoServer","preventDefault","updateCustid","put","headers","then","response","success","toastId","error","console","log","getOldCustomerData","get","data","getCityList","custName","target","value","custMobNo","email","custAddress","custCity","length","map","city","i","state","pincode"],"sources":["C:/Major Project/ProjectFrontend/pbms/src/components/UpdateCustomer.js"],"sourcesContent":["import axios from \"axios\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport base_url from \"../api/Service\";\r\nimport { getToken } from \"../auth\";\r\n\r\nfunction UpdateCustomer() {\r\n\r\n    useEffect(() => {\r\n        document.title = \"Update Customer || Property Booking Management System\"\r\n    }, [])\r\n\r\n    const [customer, setCustomer] = useState({})\r\n    const [oldCustomer, setOldCustomer] = useState({})\r\n    const [cityList, setCityList] = useState({})\r\n\r\n    const handleForm = (e) => {\r\n        putDatatoServer(customer);\r\n        e.preventDefault();\r\n    }\r\n\r\n    const {updateCustid} = useParams();\r\n\r\n    const putDatatoServer = (customer) => {\r\n        axios.put(`${base_url}/customers/${updateCustid}`, customer, {headers: {\"Authorization\" : `Bearer ${getToken()}`}}).then(\r\n            (response) => {\r\n                toast.success(\"Customer Updated Successfully\", {\r\n                    toastId: \"custaddedtoast\"\r\n                })\r\n            },\r\n            (error) => {\r\n                console.log(error);\r\n            }\r\n        )\r\n    }\r\n\r\n    const getOldCustomerData = () => {\r\n\r\n        axios.get(`${base_url}/customers/${updateCustid}`, {headers: {\"Authorization\" : `Bearer ${getToken()}`}}).then(\r\n            (response) => {\r\n                setOldCustomer(response.data)\r\n                setCustomer(response.data)\r\n            },\r\n            (error) => {\r\n                console.log(error);\r\n            }\r\n        );\r\n    }\r\n\r\n    const getCityList = () => {\r\n\r\n        axios.get(`${base_url}/cities/`, {headers: {\"Authorization\" : `Bearer ${getToken()}`}}).then(\r\n            (response) => {\r\n                setCityList(response.data)\r\n            },\r\n            (error) => {\r\n                console.log(error);\r\n            }\r\n        );\r\n    }\r\n\r\n    useEffect(() => {\r\n        getOldCustomerData();\r\n        getCityList();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"container-fluid \">\r\n                <div className=\"row col-12\">\r\n\r\n                    <div className=\"w-100\">\r\n                        <form className=\"justify-content-center text-center\" onSubmit={handleForm} action=\"/\" method=\"post\" id=\"customer_update_form\">\r\n\r\n                            <div className=\"alert alert-info text-center w-100 p-3 ml-3\" role=\"alert\">\r\n                                <h2>Update Customer Details</h2>\r\n                            </div>\r\n                            <input id=\"custID\" placeholder=\"Customer ID\" className=\"form-control m-3\" type=\"text\" disabled defaultValue={updateCustid} />\r\n                            <input id=\"custName\" placeholder=\"Customer's Name\" className=\"form-control m-3\" type=\"text\" defaultValue={oldCustomer.custName} onChange={(e) => {\r\n                                setCustomer({ ...customer, custName: e.target.value })\r\n                            }} />\r\n                            <input id=\"custMobNo\" placeholder=\"Enter Phone Number\" className=\"form-control m-3\" type=\"tel\" defaultValue={oldCustomer.custMobNo} onChange={(e) => {\r\n                                setCustomer({ ...customer, custMobNo: e.target.value })\r\n                            }} />\r\n                            <input id=\"email\" placeholder=\"Enter E-Mail Address\" className=\"form-control m-3\" type=\"email\" defaultValue={oldCustomer.email} onChange={(e) => {\r\n                                setCustomer({ ...customer, email: e.target.value })\r\n                            }} />\r\n                            <input id=\"custAddress\" placeholder=\"Customer's Address\" className=\"form-control m-3\" type=\"text\" defaultValue={oldCustomer.custAddress} onChange={(e) => {\r\n                                setCustomer({ ...customer, custAddress: e.target.value })\r\n                            }} />\r\n\r\n                            <div className=\"form-inline row \">\r\n                                <div className=\"col-6\">\r\n                                    <select className=\"form-control w-100 ml-3\" id=\"custCity\" defaultValue={oldCustomer.custCity} value={oldCustomer.custCity} onChange={(e) => {\r\n                                        setCustomer({ ...customer, custCity: e.target.value })\r\n                                    }}>\r\n                                        <option>Select City</option>\r\n\r\n                                        {\r\n                                            cityList.length > 0 ? cityList.map((city, i) => (\r\n\r\n                                                <option key={i} value={city.city}>{city.city}</option>\r\n\r\n\r\n                                            )) : <option>Server Down or No City Found</option>\r\n                                        }\r\n\r\n                                    </select>\r\n                                </div>\r\n                                <div className=\"col-6\">\r\n                                    <select className=\"form-control w-100 ml-3\" id=\"state\" defaultValue={oldCustomer.state} value={oldCustomer.state} onChange={(e) => {\r\n                                        setCustomer({ ...customer, state: e.target.value })\r\n                                    }}>\r\n                                        <option>Select State</option>\r\n                                        <option value={oldCustomer.state}>Maharashtra</option>\r\n                                    </select>\r\n\r\n                                </div>\r\n\r\n                            </div>\r\n                            <input id=\"pincode\" placeholder=\"Pin Code\" className=\"form-control m-3\" type=\"text\" defaultValue={oldCustomer.pincode} onChange={(e) => {\r\n                                setCustomer({ ...customer, pincode: e.target.value })\r\n                            }} />\r\n\r\n                            <button type=\"submit\" className=\"btn btn-outline-success mx-3\">Update Customer</button>\r\n                            <Link to=\"/dashboard/viewcustomers\"><button className=\"btn btn-outline-warning mx-3\">Back</button></Link>\r\n                            \r\n                        </form>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default UpdateCustomer"],"mappings":"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"},"metadata":{},"sourceType":"module"}