{"ast":null,"code":"import _slicedToArray from\"C:/Major Project/ProjectFrontend/pbms/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import jsPDF from\"jspdf\";import React,{useEffect}from\"react\";import{useState}from\"react\";import{toast}from\"react-toastify\";import{Button,Table}from\"reactstrap\";import base_url from\"../api/Service\";import{getToken}from\"../auth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AllPayments(){useEffect(function(){document.title=\"Payment Report || Property Booking Management System\";},[]);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),payments=_useState2[0],setPayments=_useState2[1];var getAllPaymentsFromServer=function getAllPaymentsFromServer(){axios.get(\"\".concat(base_url,\"/payments/\"),{headers:{\"Authorization\":\"Bearer \".concat(getToken())}}).then(function(response){toast.success(\"Payment List has been Updated\",{toastId:\"loadedtoast\"});setPayments(response.data);},function(error){console.log(error);toast.error(\"Server Down\",{toastId:\"errortoast\"});});};useEffect(function(){getAllPaymentsFromServer();},[]);var printfunction=function printfunction(){var doc=new jsPDF();doc.text(\"Booking Details\",20,10);doc.autoTable({html:'#PaymentTable'});doc.save('Paymentdetails.pdf');toast.info(\"Payments Report Downloaded Successfully\",{toastId:\"downloadtoast\"});};return/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-info text-center w-100 p-3 ml-3\",role:\"alert\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Payments Reports\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"my-custom-scrollbar table-wrapper-scroll-y ml-3\",children:/*#__PURE__*/_jsxs(Table,{className:\"table table-bordered table-striped mb-0 w-100\",id:\"PaymentTable\",striped:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"col-2\",scope:\"row\",children:\"Payment Id\"}),/*#__PURE__*/_jsx(\"th\",{className:\"col-4\",children:\"Customer Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"col-2\",children:\"Payment Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"col-2\",children:\"Rate\"}),/*#__PURE__*/_jsx(\"th\",{className:\"col-2\",children:\"Amount Remaining\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:payments.length>0?payments.map(function(payment,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-center\",scope:\"row\",children:payment.payID}),/*#__PURE__*/_jsx(\"td\",{children:payment.cname}),/*#__PURE__*/_jsx(\"td\",{children:payment.payDate}),/*#__PURE__*/_jsx(\"td\",{children:payment.rate}),/*#__PURE__*/_jsx(\"td\",{children:payment.amountRem})]},i);}):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",colSpan:6,children:\"No Properties Found or Server Down\"})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"container text-center p-3\",children:/*#__PURE__*/_jsx(Button,{color:\"info\",outline:true,onClick:printfunction,children:\"Download Payments Report\"})})]});}export default AllPayments;","map":{"version":3,"names":["axios","jsPDF","React","useEffect","useState","toast","Button","Table","base_url","getToken","AllPayments","document","title","payments","setPayments","getAllPaymentsFromServer","get","headers","then","response","success","toastId","data","error","console","log","printfunction","doc","text","autoTable","html","save","info","length","map","payment","i","payID","cname","payDate","rate","amountRem"],"sources":["C:/Major Project/ProjectFrontend/pbms/src/components/AllPayments.js"],"sourcesContent":["import axios from \"axios\";\r\nimport jsPDF from \"jspdf\";\r\nimport React, { useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Button, Table } from \"reactstrap\";\r\nimport base_url from \"../api/Service\";\r\nimport { getToken } from \"../auth\";\r\n\r\nfunction AllPayments() {\r\n\r\n    useEffect(()=> {\r\n        document.title=\"Payment Report || Property Booking Management System\"\r\n    },[])\r\n\r\n    const [payments, setPayments] = useState([])\r\n\r\n    const getAllPaymentsFromServer = () => {\r\n        axios.get(`${base_url}/payments/`, {headers: {\"Authorization\" : `Bearer ${getToken()}`}}).then(\r\n            (response) => {\r\n                toast.success(\"Payment List has been Updated\", {\r\n                    toastId: \"loadedtoast\"\r\n                });\r\n                setPayments(response.data)\r\n            },\r\n            (error) => {\r\n                console.log(error);\r\n                toast.error(\"Server Down\", {\r\n                    toastId: \"errortoast\"\r\n                });\r\n            }\r\n        );\r\n    };\r\n\r\n    useEffect(() => {\r\n        getAllPaymentsFromServer();\r\n    }, [])\r\n\r\n    const printfunction = () => {\r\n        const doc = new jsPDF()\r\n        doc.text(\"Booking Details\", 20, 10)\r\n        doc.autoTable({ html: '#PaymentTable' })\r\n        doc.save('Paymentdetails.pdf')\r\n        toast.info(\"Payments Report Downloaded Successfully\", {\r\n            toastId: \"downloadtoast\"\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"ml-3\">\r\n            <div className=\"alert alert-info text-center w-100 p-3 ml-3\" role=\"alert\">\r\n                <h2>Payments Reports</h2>\r\n            </div>\r\n            <div className=\"my-custom-scrollbar table-wrapper-scroll-y ml-3\">\r\n                <Table className=\"table table-bordered table-striped mb-0 w-100\" id=\"PaymentTable\" striped >\r\n                    <thead>\r\n                        <tr>\r\n                            <th className=\"col-2\" scope=\"row\">Payment Id</th>\r\n                            <th className=\"col-4\">Customer Name</th>\r\n                            <th className=\"col-2\">Payment Date</th>\r\n                            <th className=\"col-2\">Rate</th>\r\n                            <th className=\"col-2\">Amount Remaining</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {\r\n                            payments.length > 0 ? payments.map((payment, i) => (\r\n                                <tr key={i}>\r\n                                    <th className=\"text-center\" scope=\"row\">{payment.payID}</th>\r\n                                    <td>{payment.cname}</td>\r\n                                    <td>{payment.payDate}</td>\r\n                                    <td>{payment.rate}</td>\r\n                                    <td>{payment.amountRem}</td>\r\n                                </tr>\r\n                            )) : <tr><td className=\"text-center\" colSpan={6}>No Properties Found or Server Down</td></tr>\r\n                        }\r\n                    </tbody>\r\n                </Table>\r\n            </div>\r\n\r\n            <div className=\"container text-center p-3\">\r\n                <Button color=\"info\" outline onClick={printfunction}>Download Payments Report</Button>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AllPayments"],"mappings":"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"},"metadata":{},"sourceType":"module"}