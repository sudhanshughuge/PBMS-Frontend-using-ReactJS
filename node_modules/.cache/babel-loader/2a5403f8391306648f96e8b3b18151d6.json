{"ast":null,"code":"import _objectSpread from\"C:/Major Project/ProjectFrontend/pbms/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Major Project/ProjectFrontend/pbms/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect}from\"react\";import{Button,Table}from\"reactstrap\";import base_url from\"../api/Service\";import axios from'axios';import{toast}from\"react-toastify\";import{useState}from\"react\";import jsPDF from'jspdf';import'jspdf-autotable';import{Link}from\"react-router-dom\";import{getToken}from\"../auth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AllCustomers(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),customers=_useState2[0],setCustomer=_useState2[1];useEffect(function(){document.title=\"Customer Report || Property Booking Management System\";},[]);var getAllCustomerFromServer=function getAllCustomerFromServer(){axios.get(\"\".concat(base_url,\"/customers/\"),{headers:{\"Authorization\":\"Bearer \".concat(getToken())}}).then(function(response){toast.success(\"Customers List has been Updated\",{toastId:\"loadedtoast\"});setCustomer(response.data);},function(error){console.log(error);toast.error(\"Server Down\",{toastId:\"errortoast\"});});};useEffect(function(){init();// eslint-disable-next-line\n},[]);var init=function init(){getAllCustomerFromServer();};var printfunction=function printfunction(){var doc=new jsPDF();doc.text(\"Customer Details\",20,10);doc.autoTable({html:'#CustomerTable'});doc.save('customerdetails.pdf');toast.info(\"Customer Report Downloaded Successfully\",{toastId:\"downloadtoast\"});};var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),deleteCust=_useState4[0],setDeleteCust=_useState4[1];var deleteCustomer=function deleteCustomer(e){e.preventDefault();deleteDatafromServer(deleteCust);};var deleteDatafromServer=function deleteDatafromServer(data){axios.delete(\"\".concat(base_url,\"/customers/\").concat(data.deletecustid),{headers:{\"Authorization\":\"Bearer \".concat(getToken())}}).then(function(response){toast.error(\"Customer Deleted\",{toastId:\"deletetoast\"});init();},function(error){console.log(error);toast.info(\"You are not an Admin or Customer Not Found\",{toastId:\"deleteinfotoast\"});});};return/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-info text-center w-100 p-3 ml-3\",role:\"alert\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Customers Reports\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"my-custom-scrollbar table-wrapper-scroll-y ml-3\",children:/*#__PURE__*/_jsxs(Table,{className:\"table table-bordered table-striped mb-0 w-100\",id:\"CustomerTable\",striped:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"col-2\",scope:\"row\",children:\"Customer Id\"}),/*#__PURE__*/_jsx(\"th\",{className:\"col-4\",children:\"Customer Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"col-3\",children:\"Mobile Number\"}),/*#__PURE__*/_jsx(\"th\",{className:\"col-1\",children:\"City\"}),/*#__PURE__*/_jsx(\"th\",{className:\"col-2\",children:\"Update\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:customers.length>0?customers.map(function(customer,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-center\",scope:\"row\",children:customer.custID}),/*#__PURE__*/_jsx(\"td\",{children:customer.custName}),/*#__PURE__*/_jsx(\"td\",{children:customer.custMobNo}),/*#__PURE__*/_jsx(\"td\",{children:customer.custCity}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:\"/dashboard/updatecustomers/\".concat(customer.custID),children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-dark  ml-2\",children:\"Update\"})})})]},i);}):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",colSpan:5,children:\"No Customers Found or Server Down\"})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"container text-center mt-3 p-3\",children:/*#__PURE__*/_jsx(\"form\",{className:\"form-inline justify-content-center\",onSubmit:deleteCustomer,action:\"\",method:\"post\",id:\"delete_customer_form\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control mx-3\",id:\"deletecustid\",placeholder:\"Enter Customer Id\",onChange:function onChange(e){setDeleteCust(_objectSpread(_objectSpread({},deleteCust),{},{deletecustid:e.target.value}));}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-outline-danger mx-3\",children:\"Delete Customer\"})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"container text-center p-3\",children:/*#__PURE__*/_jsx(Button,{color:\"info\",outline:true,onClick:printfunction,children:\"Download Customer Report\"})})]});}export default AllCustomers;","map":{"version":3,"names":["React","useEffect","Button","Table","base_url","axios","toast","useState","jsPDF","Link","getToken","AllCustomers","customers","setCustomer","document","title","getAllCustomerFromServer","get","headers","then","response","success","toastId","data","error","console","log","init","printfunction","doc","text","autoTable","html","save","info","deleteCust","setDeleteCust","deleteCustomer","e","preventDefault","deleteDatafromServer","delete","deletecustid","length","map","customer","i","custID","custName","custMobNo","custCity","target","value"],"sources":["C:/Major Project/ProjectFrontend/pbms/src/components/AllCustomers.js"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { Button, Table } from \"reactstrap\";\r\n\r\n\r\nimport base_url from \"../api/Service\";\r\nimport axios from 'axios';\r\nimport { toast } from \"react-toastify\";\r\nimport { useState } from \"react\";\r\n\r\nimport jsPDF from 'jspdf';\r\nimport 'jspdf-autotable'\r\nimport { Link } from \"react-router-dom\";\r\nimport { getToken } from \"../auth\";\r\n\r\n\r\nfunction AllCustomers() {\r\n\r\n\r\n    const [customers, setCustomer] = useState([])\r\n\r\n    useEffect(() => {\r\n        document.title = \"Customer Report || Property Booking Management System\"\r\n    }, [])\r\n\r\n    const getAllCustomerFromServer = () => {\r\n        axios.get(`${base_url}/customers/`, { headers: { \"Authorization\": `Bearer ${getToken()}` } }).then(\r\n            (response) => {\r\n                toast.success(\"Customers List has been Updated\", {\r\n                    toastId: \"loadedtoast\"\r\n                });\r\n                setCustomer(response.data)\r\n            },\r\n            (error) => {\r\n                console.log(error);\r\n                toast.error(\"Server Down\", {\r\n                    toastId: \"errortoast\"\r\n                });\r\n            }\r\n        );\r\n    };\r\n\r\n    useEffect(() => {\r\n        init();\r\n        // eslint-disable-next-line\r\n    }, [])\r\n\r\n    const init = () => {\r\n        getAllCustomerFromServer();\r\n    }\r\n\r\n    const printfunction = () => {\r\n        const doc = new jsPDF()\r\n        doc.text(\"Customer Details\", 20, 10)\r\n        doc.autoTable({ html: '#CustomerTable' })\r\n        doc.save('customerdetails.pdf')\r\n        toast.info(\"Customer Report Downloaded Successfully\", {\r\n            toastId: \"downloadtoast\"\r\n        })\r\n    }\r\n\r\n    const [deleteCust, setDeleteCust] = useState({})\r\n\r\n    const deleteCustomer = (e) => {\r\n        e.preventDefault();\r\n        deleteDatafromServer(deleteCust);\r\n    }\r\n\r\n    const deleteDatafromServer = (data) => {\r\n        axios.delete(`${base_url}/customers/${data.deletecustid}`, { headers: { \"Authorization\": `Bearer ${getToken()}` } }).then(\r\n            (response) => {\r\n                toast.error(\"Customer Deleted\", {\r\n                    toastId: \"deletetoast\"\r\n                })\r\n                init();\r\n            },\r\n            (error) => {\r\n                console.log(error);\r\n                toast.info(\"You are not an Admin or Customer Not Found\", {\r\n                    toastId: \"deleteinfotoast\"\r\n                })\r\n            }\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"ml-3\">\r\n            <div className=\"alert alert-info text-center w-100 p-3 ml-3\" role=\"alert\">\r\n                <h2>Customers Reports</h2>\r\n            </div>\r\n            <div className=\"my-custom-scrollbar table-wrapper-scroll-y ml-3\">\r\n                <Table className=\"table table-bordered table-striped mb-0 w-100\" id=\"CustomerTable\" striped >\r\n                    <thead>\r\n                        <tr>\r\n                            <th className=\"col-2\" scope=\"row\">Customer Id</th>\r\n                            <th className=\"col-4\">Customer Name</th>\r\n                            <th className=\"col-3\">Mobile Number</th>\r\n                            <th className=\"col-1\">City</th>\r\n                            <th className=\"col-2\">Update</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {\r\n                            customers.length > 0 ? customers.map((customer, i) => (\r\n                                <tr key={i}>\r\n                                    <th className=\"text-center\" scope=\"row\">{customer.custID}</th>\r\n                                    <td>{customer.custName}</td>\r\n                                    <td>{customer.custMobNo}</td>\r\n                                    <td>{customer.custCity}</td>\r\n                                    <td><Link to={`/dashboard/updatecustomers/${customer.custID}`}><button className=\"btn btn-outline-dark  ml-2\">Update</button></Link></td>\r\n                                </tr>\r\n                            )) : <tr><td className=\"text-center\" colSpan={5}>No Customers Found or Server Down</td></tr>\r\n                        }\r\n                    </tbody>\r\n                </Table>\r\n            </div>\r\n\r\n\r\n            <div className=\"container text-center mt-3 p-3\">\r\n                <form className=\"form-inline justify-content-center\" onSubmit={deleteCustomer} action=\"\" method=\"post\" id=\"delete_customer_form\">\r\n                    <div className=\"form-group\">\r\n                        <input type=\"text\" className=\"form-control mx-3\" id=\"deletecustid\" placeholder=\"Enter Customer Id\" onChange={(e) => {\r\n                            setDeleteCust({ ...deleteCust, deletecustid: e.target.value })\r\n                        }} />\r\n                        <button type=\"submit\" className=\"btn btn-outline-danger mx-3\">Delete Customer</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n\r\n            <div className=\"container text-center p-3\">\r\n                <Button color=\"info\" outline onClick={printfunction}>Download Customer Report</Button>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AllCustomers"],"mappings":"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"},"metadata":{},"sourceType":"module"}