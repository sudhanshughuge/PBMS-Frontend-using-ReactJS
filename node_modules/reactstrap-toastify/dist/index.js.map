{"version":3,"file":"index.js","sources":["../src/Actions.js","../src/Reducer.js","../node_modules/style-inject/dist/style-inject.es.js","../src/Component.js"],"sourcesContent":["const NOTIFY = \"RST_NOTIFY\";\nconst CLEAR = \"RST_CLEAR\";\nconst DISMISS = \"RST_DISMISS\";\n\n/**\n * Add new toast notification.\n * @param {Object} notification - Notification to be displayed.\n */\nconst notify = ({\n  /** Icon to display on the left side of the title. */\n  icon,\n  /** Title to display. */\n  title,\n  /** Message to display. */\n  message,\n  /** Color theme to apply. */\n  color,\n  /** Indicates if the notification can be dismissed by the user. */\n  dismissable,\n  /** Indicates after how many milliseconds the toast notification must be closed automatically. */\n  autoClose\n}) => dispatch =>\n  dispatch({\n    type: NOTIFY,\n    icon,\n    title,\n    message,\n    color,\n    dismissable,\n    autoClose\n  });\n\n/**\n * Clear all notifications.\n */\nconst clear = () => ({ type: CLEAR });\n/**\n * Dismiss specific notification.\n * @param {Array} queue\n */\nconst dismiss = notification => ({ type: DISMISS, notification });\n\nexport default {\n  notify,\n  clear,\n  dismiss,\n  ENUM: {\n    NOTIFY,\n    CLEAR,\n    DISMISS\n  }\n};\n","import Actions from \"./Actions\";\n\nexport default function toast(\n  state = {\n    queue: []\n  },\n  action\n) {\n  switch (action.type) {\n    case Actions.ENUM.NOTIFY:\n      return {\n        queue: state.queue.concat([\n          {\n            icon: action.icon,\n            title: action.title,\n            message: action.message,\n            color: action.color || \"secondary\",\n            dismissable: action.dismissable || false,\n            autoClose: action.autoClose || false,\n            isOpen: true\n          }\n        ])\n      };\n    case Actions.ENUM.CLEAR:\n      return {\n        queue: []\n      };\n    case Actions.ENUM.DISMISS:\n      return {\n        queue: state.queue\n          .filter(q => q === action.notification || q.isOpen)\n          .map(q => ({\n            ...q,\n            isOpen: !(action.notification === q)\n          }))\n      };\n    default:\n      return state;\n  }\n}\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Toast, ToastHeader, ToastBody } from \"reactstrap\";\nimport styles from \"./styles.css\";\n\nclass Toaster extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      closed: [],\n      visible: []\n    };\n  }\n  componentDidMount() {\n    this.scheduleAutoCloseAndBackground();\n  }\n  componentDidUpdate(prevProps) {\n    if (\n      prevProps.state.toast.queue.length !== this.props.state.toast.queue.length\n    ) {\n      this.scheduleAutoCloseAndBackground();\n    }\n  }\n  scheduleAutoCloseAndBackground() {\n    const { state } = this.props;\n    const { toast } = state;\n    const { queue } = toast;\n    const itemsWithAutoClose = queue.filter(\n      item => item.autoClose > 0 && item.isOpen === true\n    );\n\n    itemsWithAutoClose.forEach(item => {\n      setTimeout(() => this.handleToggle(item), item.autoClose);\n    });\n\n    setTimeout(\n      () =>\n        this.setState({\n          visible: queue\n        }),\n      250\n    );\n  }\n\n  handleToggle(item) {\n    this.setState(\n      {\n        visible: this.state.visible.filter(v => v !== item)\n      },\n      () =>\n        setTimeout(\n          () =>\n            this.setState({\n              closed: this.state.closed.concat(item)\n            }),\n          300\n        )\n    );\n  }\n\n  render() {\n    const { state } = this.props;\n    const { toast } = state;\n    const { queue } = toast;\n\n    return (\n      <div className={`${styles.list} mr-2 mb-0`}>\n        {queue.map((item, idx) => this.renderToast(item, idx))}\n      </div>\n    );\n  }\n  renderToast(item, idx) {\n    const title = typeof item.title === \"function\" ? item.title() : item.title;\n    const message =\n      typeof item.message === \"function\" ? item.message() : item.message;\n    const isOpen = this.state.closed.indexOf(item) === -1 && item.isOpen;\n    const isVisible = this.state.visible.indexOf(item) !== -1;\n    const className = isVisible ? `bg-${item.color}` : \"\";\n    return (\n      <div key={idx} className={`${styles.item} rounded ${className} b-0 mb-1`}>\n        <Toast isOpen={isOpen}>\n          <ToastHeader\n            icon={item.icon}\n            toggle={\n              item.dismissable ? this.handleToggle.bind(this, item) : undefined\n            }\n          >\n            {title}\n          </ToastHeader>\n\n          <ToastBody>{message}</ToastBody>\n        </Toast>\n      </div>\n    );\n  }\n}\n\nexport default connect(state => ({ state }))(Toaster);\n"],"names":["NOTIFY","CLEAR","DISMISS","notify","icon","title","message","color","dismissable","autoClose","dispatch","clear","type","dismiss","notification","toast","state","action","Actions","ENUM","queue","concat","filter","q","isOpen","map","Toaster","props","scheduleAutoCloseAndBackground","prevProps","length","itemsWithAutoClose","item","forEach","handleToggle","setState","visible","v","setTimeout","closed","styles","list","idx","renderToast","indexOf","isVisible","className","bind","undefined","React","Component","connect"],"mappings":"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"}